"use strict";(self.webpackChunkreact_native_android_widget_docs=self.webpackChunkreact_native_android_widget_docs||[]).push([[7473],{3905:(e,t,n)=>{n.d(t,{Zo:()=>g,kt:()=>u});var i=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=i.createContext({}),p=function(e){var t=i.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},g=function(e){var t=p(e.components);return i.createElement(s.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return i.createElement(i.Fragment,{},t)}},l=i.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,g=d(e,["components","mdxType","originalType","parentName"]),l=p(n),u=r,f=l["".concat(s,".").concat(u)]||l[u]||c[u]||a;return n?i.createElement(f,o(o({ref:t},g),{},{components:n})):i.createElement(f,o({ref:t},g))}));function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,o=new Array(a);o[0]=l;var d={};for(var s in t)hasOwnProperty.call(t,s)&&(d[s]=t[s]);d.originalType=e,d.mdxType="string"==typeof e?e:r,o[1]=d;for(var p=2;p<a;p++)o[p]=n[p];return i.createElement.apply(null,o)}return i.createElement.apply(null,n)}l.displayName="MDXCreateElement"},8239:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>c,frontMatter:()=>a,metadata:()=>d,toc:()=>p});var i=n(7462),r=(n(7294),n(3905));const a={sidebar_position:4},o="registerWidgetConfigurationScreen",d={unversionedId:"api/register-widget-configuration-screen",id:"api/register-widget-configuration-screen",title:"registerWidgetConfigurationScreen",description:"react-native-android-widget exports a registerWidgetConfigurationScreen function that can be used to register a widget configuration screen. When a configurable widget is added on the home screen, or reconfigured once on the home screen, the registered configuration screen will be opened.",source:"@site/docs/api/register-widget-configuration-screen.md",sourceDirName:"api",slug:"/api/register-widget-configuration-screen",permalink:"/react-native-android-widget/docs/api/register-widget-configuration-screen",draft:!1,editUrl:"https://github.com/sAleksovski/react-native-android-widget/tree/master/docs/docs/api/register-widget-configuration-screen.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"default",previous:{title:"requestWidgetUpdate",permalink:"/react-native-android-widget/docs/api/request-widget-update"},next:{title:"Primitives",permalink:"/react-native-android-widget/docs/primitives/index"}},s={},p=[{value:"Multiple configurable widgets",id:"multiple-configurable-widgets",level:2},{value:"Usage",id:"usage",level:2},{value:"Register the widget configuration screen",id:"register-the-widget-configuration-screen",level:2},{value:"Register widget task handler (Expo)",id:"register-widget-task-handler-expo",level:2},{value:"Types",id:"types",level:2}],g={toc:p};function c(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,i.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"registerwidgetconfigurationscreen"},"registerWidgetConfigurationScreen"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"react-native-android-widget")," exports a ",(0,r.kt)("inlineCode",{parentName:"p"},"registerWidgetConfigurationScreen")," function that can be used to register a widget configuration screen. When a configurable widget is added on the home screen, or reconfigured once on the home screen, the registered configuration screen will be opened."),(0,r.kt)("p",null,"The user can cancel the configuration (by calling ",(0,r.kt)("inlineCode",{parentName:"p"},"setResult('cancel')"),").\nIf the widget was just added it will be removed from the home screen, otherwise just the conifuguration will be canceled and the widget will remain as is."),(0,r.kt)("p",null,"If the user changes some configuration and wants to add the widget, we will need to:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Call ",(0,r.kt)("inlineCode",{parentName:"li"},"renderWidget")," to update the widget with the new configuration"),(0,r.kt)("li",{parentName:"ul"},"Call ",(0,r.kt)("inlineCode",{parentName:"li"},"setResult('ok')")," to indicate that the configuration is done and the screen can be closed")),(0,r.kt)("h2",{id:"multiple-configurable-widgets"},"Multiple configurable widgets"),(0,r.kt)("p",null,"If we have multiple configurable widgets, they will share the same configuration screen,\nbut we can check which widget is configured by the ",(0,r.kt)("inlineCode",{parentName:"p"},"widgetInfo")," prop and show different UI depending on the widget."),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)("p",null,"First, create a widget configuration component, containing:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="WidgetConfigurationScreen.tsx"',title:'"WidgetConfigurationScreen.tsx"'},"import React from 'react';\nimport type { WidgetConfigurationScreenProps } from 'react-native-android-widget';\nimport { ConfigurableWidget } from './ConfigurableWidget';\n\nexport function WidgetConfigurationScreen({\n  widgetInfo,\n  setResult,\n  renderWidget,\n}: WidgetConfigurationScreenProps) {\n  // Here we can define the UI for configuring the widget\n}\n")),(0,r.kt)("h2",{id:"register-the-widget-configuration-screen"},"Register the widget configuration screen"),(0,r.kt)("p",null,"In the main ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," (or ",(0,r.kt)("inlineCode",{parentName:"p"},"index.ts"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"index.tsx"),") file for our app, when we register the main component, register the widget configuration screen."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="index.ts"',title:'"index.ts"'},"import { AppRegistry } from 'react-native';\nimport {\n  registerWidgetConfigurationScreen,\n  registerWidgetTaskHandler,\n} from 'react-native-android-widget';\nimport { name as appName } from './app.json';\nimport App from './App';\nimport { widgetTaskHandler } from './widget-task-handler';\nimport { WidgetConfigurationScreen } from './WidgetConfigurationScreen';\n\nAppRegistry.registerComponent(appName, () => App);\nregisterWidgetTaskHandler(widgetTaskHandler);\nregisterWidgetConfigurationScreen(WidgetConfigurationScreen);\n")),(0,r.kt)("h2",{id:"register-widget-task-handler-expo"},"Register widget task handler (Expo)"),(0,r.kt)("p",null,"If we are using Expo, there is no ",(0,r.kt)("inlineCode",{parentName:"p"},"index.js")," (or ",(0,r.kt)("inlineCode",{parentName:"p"},"index.ts"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"index.tsx"),"), but we can create it."),(0,r.kt)("p",null,"First, update ",(0,r.kt)("inlineCode",{parentName:"p"},"package.json")," main field to point to ",(0,r.kt)("inlineCode",{parentName:"p"},"index.ts")," (or ",(0,r.kt)("inlineCode",{parentName:"p"},".js"),") instead of ",(0,r.kt)("inlineCode",{parentName:"p"},"node_modules/expo/AppEntry.js")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="package.json"',title:'"package.json"'},'{\n  "name": "my-expo-app",\n  "main": "index.ts",\n  ...\n}\n')),(0,r.kt)("p",null,"Create the file, using ",(0,r.kt)("inlineCode",{parentName:"p"},"node_modules/expo/AppEntry.js")," as a template.\nThen import ",(0,r.kt)("inlineCode",{parentName:"p"},"widgetTaskHandler")," and register it."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="index.ts"',title:'"index.ts"'},"import { registerRootComponent } from 'expo';\nimport {\n  registerWidgetConfigurationScreen,\n  registerWidgetTaskHandler,\n} from 'react-native-android-widget';\n\nimport App from './App';\nimport { widgetTaskHandler } from './widget-task-handler';\nimport { WidgetConfigurationScreen } from './WidgetConfigurationScreen';\n\n// registerRootComponent calls AppRegistry.registerComponent('main', () => App);\n// It also ensures that whether you load the app in Expo Go or in a native build,\n// the environment is set up appropriately\nregisterRootComponent(App);\nregisterWidgetTaskHandler(widgetTaskHandler);\nregisterWidgetConfigurationScreen(WidgetConfigurationScreen);\n")),(0,r.kt)("h2",{id:"types"},"Types"),(0,r.kt)("p",null,"Check the types in the ",(0,r.kt)("a",{parentName:"p",href:"/docs/public-api#registerwidgetconfigurationscreen"},"Public API")," documentation"),(0,r.kt)("p",null,"The widget configuration screen has some properties, described with ",(0,r.kt)("a",{parentName:"p",href:"/docs/public-api/interfaces/WidgetConfigurationScreenProps"},"WidgetConfigurationScreenProps")))}c.isMDXComponent=!0}}]);